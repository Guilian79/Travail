{"version":3,"file":"undernet.bundle.js","sources":["../src/js/helpers/constants.js","../src/js/helpers/dom.js","../src/js/helpers/is-browser-env.js","../src/js/helpers/component-engine.js","../src/js/helpers/create-focus-ring.js","../src/js/helpers/log.js","../src/js/helpers/create-focus-trap.js","../src/js/helpers/focus-once.js","../src/js/helpers/is-ios-mobile.js","../src/js/helpers/throttle.js","../src/js/collapsible/constants.js","../src/js/collapsible/collapsible.js","../src/js/dropdown/constants.js","../src/js/dropdown/dropdown.js","../src/js/modal/constants.js","../src/js/modal/modal.js","../src/js/tooltip/constants.js","../src/js/tooltip/tooltip.js","../src/js/index.js","../src/js/index.bundle.js"],"sourcesContent":["export const KeyCodes = {\n  SHIFT: 16,\n  TAB: 9,\n  ARROW_UP: 38,\n  ARROW_DOWN: 40,\n}\n\nexport const Selectors = {\n  FOCUSABLE_TAGS: [\"a\", \"button\", \"input\", \"object\", \"select\", \"textarea\", \"[tabindex]\"],\n  KEYBOARD_CLASS: \"using-keyboard\",\n  NOT_VISUALLY_HIDDEN_CLASS: \":not(.is-visually-hidden)\",\n  TABINDEX: \"tabindex\",\n}\n\nexport const Events = {\n  KEYDOWN: \"keydown\",\n  CLICK: \"click\",\n  BLUR: \"blur\",\n}\n\nexport const Messages = {\n  NO_SELECTOR_STRING_OR_CHILDREN_ERROR:\n    \"createFocusTrap must be given one or both of: first parameter (as selector string)\" +\n    \" and/or options.children (array of elements).\",\n  OPTION_MATCHERS_DATA_TYPE_ERROR:\n    \"Invalid data type given to options.matchers for createFocusTrap. Expected: Array.\",\n  INCORRECT_MATCHER_TYPE_ERROR: type =>\n    `Invalid matcher given to options.matchers for createFocusTrap. Expected: String. Recieved: ${type}.`,\n  NO_MATCHER_LENGTH_ERROR:\n    \"Invalid value given to options.matchers for createFocusTrap; value must be an array with at least one selector string\",\n}\n","import { Selectors } from \"./constants\"\n\n/**\n * Run a `querySelectorAll` but convert the result to an array literal for IE11 compat.\n * @param {string} selector\n * @param {HTMLElement} parent\n */\nexport const queryAll = (selector, parent = document) => {\n  return Array.apply(null, parent.querySelectorAll(selector))\n}\n\n/**\n * Search for elements matching a given selector.\n *\n * ```js\n * const elements = getFocusableElements(\".wrapper\")\n * elements.forEach(element => element.classList.add(\"focusable\"))\n * ```\n *\n * Use a custom pattern to select only specific elements:\n *\n * ```js\n * const elements = getFocusableElements(\".wrapper\", [\".my-button\"])\n * ```\n *\n * @param {String} selectorString - The selector string of the container element.\n * @param {String[]} matchers - Optional matchers override. Defaults to common focusable selectors.\n * @returns {Element[]} Static array of HTML elements\n */\nexport const getFocusableElements = (selectorString, matchers = Selectors.FOCUSABLE_TAGS) => {\n  const focusables = matchers\n    .map(selector => `${selectorString} ${selector}${Selectors.NOT_VISUALLY_HIDDEN_CLASS}`)\n    .join(\", \")\n\n  return queryAll(focusables)\n}\n","/**\n * Check if window exists. If it doesn't, we're probably in a non-test node environment.\n */\nexport const isBrowserEnv = typeof window !== \"undefined\"\n","import { queryAll } from \"./dom\"\nimport { isBrowserEnv } from \"./is-browser-env\"\n\nconst isString = value => typeof value === \"string\"\nconst isFunction = value => typeof value === \"function\"\n\nexport const ComponentEngine = {\n  /**\n   * Initialize an Undernet component globally or by id.\n   * @param {Object} metadata\n   * @property {string} id\n   * @property {string} attribute\n   * @property {Object} thisArg\n   */\n  start: (metadata = {}) => {\n    if (!isBrowserEnv) return\n\n    const { id, attribute, thisArg } = metadata\n\n    if (id && isString(id)) {\n      const instance = document.querySelector(`[${attribute}='${id}']`)\n      if (!instance) return\n\n      const validComponent = [instance].filter(thisArg._validate)[0]\n      if (!validComponent) return\n\n      thisArg._components.push(validComponent)\n    } else if (!id && !thisArg._components.length) {\n      const instances = queryAll(`[${attribute}]`)\n      if (!instances.length) return\n\n      const validComponents = instances.filter(thisArg._validate)\n      thisArg._components = thisArg._components.concat(validComponents)\n    } else {\n      // attempted to .start() when .stop() wasn't run,\n      // OR tried to instantiate a component that's already active.\n    }\n  },\n  /**\n   * Teardown an Undernet component globally or by id.\n   * @param {Object} metadata\n   * @property {string} id\n   * @property {string} attribute\n   * @property {Object} thisArg\n   * @property {string} activeNodeKey\n   * @property {*=} cancelActiveFn\n   */\n  stop: (metadata = {}) => {\n    if (!isBrowserEnv) return\n\n    const { id, attribute, thisArg, activeNodeKey, cancelActiveFn } = metadata\n\n    if (id && isString(id)) {\n      let targetIndex\n      const instance = thisArg._components.filter((activeInstance, index) => {\n        if (activeInstance.getAttribute(attribute) !== id) return false\n        targetIndex = index\n        return true\n      })[0]\n\n      if (!instance) return\n\n      if (\n        thisArg[activeNodeKey] &&\n        instance === thisArg[activeNodeKey] &&\n        isFunction(cancelActiveFn)\n      )\n        thisArg[cancelActiveFn]()\n\n      thisArg._teardown(instance)\n      thisArg._components.splice(targetIndex, 1)\n    } else if (!id && thisArg._components.length) {\n      if (thisArg[activeNodeKey] && isFunction(cancelActiveFn)) thisArg[cancelActiveFn]()\n\n      thisArg._components.forEach(thisArg._teardown)\n      thisArg._components = []\n    }\n  },\n}\n","import { Events, Selectors } from \"./constants\"\nimport { isBrowserEnv } from \"./is-browser-env\"\n\n/**\n * Factory function that creates focus ring helpers.\n *\n * ```js\n * const focusRing = createFocusRing()\n * focusRing.start()\n * focusRing.stop()\n * ```\n *\n * @returns {{ start: Function, stop: Function }}\n */\nexport const createFocusRing = () => {\n  if (!isBrowserEnv) return\n\n  let listeningForKeydown\n\n  const listenForKeyboard = () => {\n    document.body.classList.add(Selectors.KEYBOARD_CLASS)\n    document.removeEventListener(Events.KEYDOWN, listenForKeyboard)\n    // eslint-disable-next-line no-use-before-define\n    document.addEventListener(Events.CLICK, listenForClick)\n    listeningForKeydown = false\n  }\n\n  const listenForClick = () => {\n    document.body.classList.remove(Selectors.KEYBOARD_CLASS)\n    document.removeEventListener(Events.CLICK, listenForClick)\n    document.addEventListener(Events.KEYDOWN, listenForKeyboard)\n    listeningForKeydown = true\n  }\n\n  return {\n    start() {\n      document.addEventListener(Events.KEYDOWN, listenForKeyboard)\n    },\n    stop() {\n      if (listeningForKeydown) {\n        document.removeEventListener(Events.KEYDOWN, listenForKeyboard)\n      } else {\n        document.body.classList.remove(Selectors.KEYBOARD_CLASS)\n        document.removeEventListener(Events.CLICK, listenForClick)\n      }\n    },\n  }\n}\n","/**\n * Log a console message.\n * @param {String} message\n * @param {String} type\n */\nexport const log = (message, type = \"error\") => console[type](message)\n","import { isBrowserEnv } from \"./is-browser-env\"\nimport { Selectors, Messages, KeyCodes, Events } from \"./constants\"\nimport { log } from \"./log\"\nimport { getFocusableElements } from \"./dom\"\n/**\n * Factory function that creates focus trap helpers.\n *\n * ```js\n * const focusTrap = createFocusTrap(\"#element-id\")\n * focusTrap.start()\n * focusTrap.stop()\n * ```\n *\n * Pass an object in the second param to use other helpers for arrow trapping, custom children, and custom matchers.\n *\n * ```js\n * const focusTrap = createFocusTrap(\"#element-id\", {\n *    useArrows: true,\n *    children: [],\n *    matchers: ['a', 'button', '.my-cool-element']\n * })\n * focusTrap.start()\n * ```\n *\n * @param {String} selectorString\n * @param {{ useArrows, children: (NodeList|Element[]), matchers: String[] }} options - useArrows is coerced to true/false.\n * @returns {{ start: Function, stop: Function }}\n */\nexport const createFocusTrap = (selectorString, options = {}) => {\n  if (!isBrowserEnv) return\n  const { useArrows, children, matchers = Selectors.FOCUSABLE_TAGS } = options\n\n  if (!selectorString && !children.length) {\n    log(Messages.NO_SELECTOR_STRING_OR_CHILDREN_ERROR)\n    return\n  }\n\n  if (!Array.isArray(matchers)) {\n    log(Messages.OPTION_MATCHERS_DATA_TYPE_ERROR)\n    return\n  } else if (matchers.length) {\n    let hasBadMatcher = false\n\n    matchers.forEach(matcher => {\n      const type = typeof matcher\n      if (type !== \"string\") {\n        log(Messages.INCORRECT_MATCHER_TYPE_ERROR(type))\n        hasBadMatcher = true\n      }\n    })\n\n    if (hasBadMatcher) return\n  } else if (!matchers.length) {\n    log(Messages.NO_MATCHER_LENGTH_ERROR)\n    return\n  }\n\n  const focusableChildren =\n    children && children.length ? children : getFocusableElements(selectorString, matchers)\n  const focusableFirstChild = focusableChildren[0]\n  const focusableLastChild = focusableChildren[focusableChildren.length - 1]\n\n  const handleFocusTrapWithTab = event => {\n    const containerElement = document.querySelector(selectorString)\n    const containerActive = document.activeElement === containerElement\n    const firstActive = document.activeElement === focusableFirstChild\n    const lastActive = document.activeElement === focusableLastChild\n\n    if (!containerActive && !firstActive && !lastActive) return\n\n    const tabKey = event.which === KeyCodes.TAB\n    const shiftKey = event.which === KeyCodes.SHIFT || event.shiftKey\n    const hasShift = shiftKey && tabKey\n    const noShift = !shiftKey && tabKey\n\n    if (hasShift && (firstActive || containerActive)) {\n      event.preventDefault()\n      focusableLastChild.focus()\n    } else if (noShift && lastActive) {\n      event.preventDefault()\n      focusableFirstChild.focus()\n    }\n  }\n\n  const focusNextChild = () => {\n    for (let i = 0; i < focusableChildren.length; i++) {\n      if (focusableChildren[i] === document.activeElement) {\n        focusableChildren[i + 1].focus()\n        break\n      }\n    }\n  }\n\n  const focusLastChild = () => {\n    for (let i = 0; i < focusableChildren.length; i++) {\n      if (focusableChildren[i] === document.activeElement) {\n        focusableChildren[i - 1].focus()\n        break\n      }\n    }\n  }\n\n  const handleFocusTrapWithArrows = event => {\n    const firstActive = document.activeElement === focusableFirstChild\n    const lastActive = document.activeElement === focusableLastChild\n    const arrowUp = event.which === KeyCodes.ARROW_UP\n    const arrowDown = event.which === KeyCodes.ARROW_DOWN\n\n    if (arrowUp || arrowDown) {\n      event.preventDefault()\n\n      if (firstActive && arrowUp) {\n        focusableLastChild.focus()\n      } else if (lastActive && arrowDown) {\n        focusableFirstChild.focus()\n      } else if (arrowDown) {\n        focusNextChild()\n      } else if (arrowUp) {\n        focusLastChild()\n      }\n    }\n  }\n\n  return {\n    start() {\n      if (useArrows) {\n        document.addEventListener(Events.KEYDOWN, handleFocusTrapWithArrows)\n      } else {\n        document.addEventListener(Events.KEYDOWN, handleFocusTrapWithTab)\n      }\n    },\n    stop() {\n      if (useArrows) {\n        document.removeEventListener(Events.KEYDOWN, handleFocusTrapWithArrows)\n      } else {\n        document.removeEventListener(Events.KEYDOWN, handleFocusTrapWithTab)\n      }\n    },\n  }\n}\n","import { Events, Selectors } from \"./constants\"\n\n/**\n * Focus a single element one time and teardown when unfocused.\n * @param {HTMLElement} element\n */\nexport const focusOnce = element => {\n  const handleBlur = ({ target }) => {\n    target.removeAttribute(Selectors.TABINDEX)\n    target.removeEventListener(Events.BLUR, handleBlur)\n  }\n\n  element.setAttribute(Selectors.TABINDEX, \"-1\")\n  element.focus()\n  element.addEventListener(Events.BLUR, handleBlur)\n}\n","import { isBrowserEnv } from \"./is-browser-env\"\n\n/**\n * Check if the current browser session is within an Apple device.\n *\n * ```js\n * if (isiOSMobile) {\n *   console.log(\"This is on iOS!\")\n * }\n * ```\n *\n * @returns {Boolean}\n */\nexport const isiOSMobile = isBrowserEnv ? /(iphone|ipod|ipad)/i.test(navigator.userAgent) : false\n","/**\n * Simple throttle utility; prevent a function from firing for a period of milliseconds.\n * @param {*} callback - function to throttle\n * @param {number} limit - time to throttle by in milliseconds\n */\nexport function throttle(callback, limit) {\n  let timeout = false\n\n  function clear() {\n    timeout = false\n  }\n\n  return function() {\n    if (timeout) return\n\n    callback.apply(this, arguments)\n    timeout = true\n    setTimeout(clear, limit)\n  }\n}\n","export const Selectors = {\n  // unique\n  DATA_COLLAPSIBLE: \"data-collapsible\",\n  // common\n  DATA_VISIBLE: \"data-visible\",\n  DATA_TARGET: \"data-target\",\n  DATA_PARENT: \"data-parent\",\n  // accessibility\n  ARIA_EXPANDED: \"aria-expanded\",\n  ARIA_CONTROLS: \"aria-controls\",\n  ARIA_HIDDEN: \"aria-hidden\",\n  ARIA_LABELLEDBY: \"aria-labelledby\",\n  TABINDEX: \"tabindex\",\n  // classes\n  IS_READY_CLASS: \"is-ready\",\n  IS_VISIBLE_CLASS: \"is-visible\",\n}\n\nexport const CssProperties = {\n  HEIGHT: \"height\",\n  VISIBILITY: \"visibility\",\n}\n\nexport const CssValues = {\n  AUTO: \"auto\",\n  HIDDEN: \"hidden\",\n  VISIBLE: \"visible\",\n}\n\nexport const Events = {\n  CLICK: \"click\",\n  TRANSITIONEND: \"transitionend\",\n}\n\nexport const Messages = {\n  NO_COLLAPSIBLE_ID_ERROR:\n    \"Could not initialize collapsible; you must include a value for the 'data-collapsible' attribute.\",\n  NO_TRIGGER_ERROR: id =>\n    `Could not find collapsible trigger with [data-target='${id}']; you can't have a collapsible without a trigger.`,\n  NO_TRIGGER_ID_ERROR: id => `Could not find id on collapsible trigger with [data-target='${id}'].`,\n  NO_CONTENT_ERROR: id =>\n    `Could not find collapsible content with id '${id}'; you can't have a collapsible without content.`,\n}\n","import { log, ComponentEngine, throttle } from \"../helpers\"\n\nimport { Selectors, CssProperties, CssValues, Events, Messages } from \"./constants\"\n\n// COMPONENT_ROLE is described using `aria-controls` for the collapsible UI pattern.\n\n/**\n * Class that instantiates or destroys all instances of collapsible components on a page.\n *\n * @module Collapsible\n */\nexport default class Collapsible {\n  constructor() {\n    // events\n    this._handleClick = throttle(this._handleClick.bind(this), 500)\n    this._handleExpandTransition = this._handleExpandTransition.bind(this)\n    this._validate = this._validate.bind(this)\n    this._teardown = this._teardown.bind(this)\n\n    // all accordions\n    this._components = []\n\n    // active accordion\n    this._activeCollapsible = {}\n    this._activeTrigger = {}\n    this._activeContent = {}\n    this._activeId = \"\"\n    this._nextAriaExpandedState = \"\"\n    this._nextAriaHiddenState = \"\"\n  }\n\n  // public\n\n  start(id) {\n    ComponentEngine.start({ id, attribute: Selectors.DATA_COLLAPSIBLE, thisArg: this })\n  }\n\n  stop(id) {\n    ComponentEngine.stop({\n      id,\n      attribute: Selectors.DATA_COLLAPSIBLE,\n      thisArg: this,\n      activeNodeKey: \"_activeCollapsible\",\n    })\n  }\n\n  // private\n\n  _validate(instance) {\n    const { trigger, id } = this._getCollapsibleData(instance)\n\n    if (!id) {\n      log(Messages.NO_COLLAPSIBLE_ID_ERROR)\n      return false\n    }\n\n    if (!trigger) {\n      log(Messages.NO_TRIGGER_ERROR(id))\n      return false\n    }\n\n    if (!trigger.id) {\n      log(Messages.NO_TRIGGER_ID_ERROR(id))\n      return false\n    }\n\n    const contentId = `#${id}`\n    const content = instance.querySelector(contentId)\n\n    if (!content) {\n      log(Messages.NO_CONTENT_ERROR(id))\n      return false\n    }\n\n    trigger.setAttribute(Selectors.ARIA_CONTROLS, id)\n    content.setAttribute(Selectors.ARIA_LABELLEDBY, trigger.id)\n\n    const contentIsVisible = instance.getAttribute(Selectors.DATA_VISIBLE) === \"true\"\n\n    if (contentIsVisible) {\n      instance.setAttribute(Selectors.DATA_VISIBLE, \"true\")\n      trigger.setAttribute(Selectors.ARIA_EXPANDED, \"true\")\n      content.setAttribute(Selectors.ARIA_HIDDEN, \"false\")\n      content.style[CssProperties.HEIGHT] = `${content.scrollHeight}px`\n      content.classList.add(Selectors.IS_VISIBLE_CLASS)\n    } else {\n      instance.setAttribute(Selectors.DATA_VISIBLE, \"false\")\n      trigger.setAttribute(Selectors.ARIA_EXPANDED, \"false\")\n      content.setAttribute(Selectors.ARIA_HIDDEN, \"true\")\n    }\n\n    requestAnimationFrame(() => {\n      trigger.classList.add(Selectors.IS_READY_CLASS)\n      content.classList.add(Selectors.IS_READY_CLASS)\n    })\n\n    trigger.addEventListener(Events.CLICK, this._handleClick)\n\n    return true\n  }\n\n  _teardown(instance) {\n    const { trigger } = this._getCollapsibleData(instance)\n    trigger.removeEventListener(Events.CLICK, this._handleClick)\n  }\n\n  _handleClick(event) {\n    event.preventDefault()\n\n    this._activeTrigger = event.target\n\n    this._setIds()\n    this._setActiveCollapsible()\n    this._setActiveContent()\n    this._setNextVisibleState()\n    this._toggleCollapsible()\n\n    this._activeCollapsible = null\n  }\n\n  _handleExpandTransition() {\n    this._activeContent.style[CssProperties.HEIGHT] = CssValues.AUTO\n    this._activeContent.removeEventListener(Events.TRANSITIONEND, this._handleExpandTransition)\n  }\n\n  _toggleCollapsible() {\n    this._activeCollapsible.setAttribute(Selectors.DATA_VISIBLE, this._nextAriaExpandedState)\n    this._activeTrigger.setAttribute(Selectors.ARIA_EXPANDED, this._nextAriaExpandedState)\n    this._activeContent.setAttribute(Selectors.ARIA_HIDDEN, this._nextAriaHiddenState)\n\n    const fullHeightValue = `${this._activeContent.scrollHeight}px`\n\n    if (this._activeCollapsible.getAttribute(Selectors.DATA_VISIBLE) === \"false\") {\n      return this._collapsePanel(fullHeightValue)\n    }\n\n    this._expandPanel(fullHeightValue)\n  }\n\n  _expandPanel(height) {\n    this._activeContent.style[CssProperties.HEIGHT] = height\n    this._activeContent.classList.add(Selectors.IS_VISIBLE_CLASS)\n    this._activeContent.addEventListener(Events.TRANSITIONEND, this._handleExpandTransition)\n  }\n\n  _collapsePanel(height) {\n    return requestAnimationFrame(() => {\n      this._activeContent.style[CssProperties.HEIGHT] = height\n\n      requestAnimationFrame(() => {\n        this._activeContent.style[CssProperties.HEIGHT] = null\n        this._activeContent.classList.remove(Selectors.IS_VISIBLE_CLASS)\n      })\n    })\n  }\n\n  _getCollapsibleData(instance) {\n    const id = instance.getAttribute(Selectors.DATA_COLLAPSIBLE)\n    const trigger = instance.querySelector(`[${Selectors.DATA_TARGET}='${id}']`)\n\n    return { id, trigger }\n  }\n\n  _setActiveContent() {\n    this._activeContent = this._activeCollapsible.querySelector(`#${this._activeId}`)\n  }\n\n  _setNextVisibleState() {\n    const currentVisibleState = this._activeCollapsible.getAttribute(Selectors.DATA_VISIBLE)\n    this._nextAriaExpandedState = currentVisibleState === \"true\" ? \"false\" : \"true\"\n    this._nextAriaHiddenState = currentVisibleState === \"false\" ? \"false\" : \"true\"\n  }\n\n  _setIds() {\n    this._activeId = this._activeTrigger.getAttribute(Selectors.DATA_TARGET)\n  }\n\n  _setActiveCollapsible() {\n    this._activeCollapsible = document.querySelector(\n      `[${Selectors.DATA_COLLAPSIBLE}='${this._activeId}']`\n    )\n  }\n}\n","export const KeyCodes = {\n  TAB: 9,\n  SHIFT: 16,\n  ESCAPE: 27,\n  ARROW_UP: 38,\n  ARROW_DOWN: 40,\n}\n\nexport const Selectors = {\n  // unique\n  DATA_DROPDOWN: \"data-dropdown\",\n  DROPDOWN_MENU_CLASS: \"dropdown-menu\",\n  // common\n  DATA_TARGET: \"data-target\",\n  DATA_PARENT: \"data-parent\",\n  DATA_VISIBLE: \"data-visible\",\n  // accessibility\n  TABINDEX: \"tabindex\",\n  ARIA_HASPOPUP: \"aria-haspopup\",\n  ARIA_CONTROLS: \"aria-controls\",\n  ARIA_LABELLEDBY: \"aria-labelledby\",\n  ARIA_EXPANDED: \"aria-expanded\",\n  // classes\n  OVERLAY_OPEN: \"overlay-open\",\n}\n\nexport const Events = {\n  KEYDOWN: \"keydown\",\n  CLICK: \"click\",\n  BLUR: \"blur\",\n}\n\nexport const Messages = {\n  NO_DROPDOWN_ID_ERROR:\n    \"Could not setup dropdown. Make sure it has a valid [data-dropdown] attribute with a unique id as its value.\",\n  NO_MENU_ERROR: attr => `Could not find menu associated with ${attr}.`,\n  NO_DROPDOWN_ITEMS_ERROR: attr => `Could not find any list items associated with ${attr}.`,\n  NO_DROPDOWN_ACTIONS_ERROR: attr =>\n    `Could not find any button or anchor elements associated with ${attr}.`,\n  NO_PARENT_ERROR: \"Could not find dropdown button's [data-parent] attribute.\",\n}\n","import { isiOSMobile, createFocusTrap, focusOnce, queryAll, log, ComponentEngine } from \"../helpers\"\nimport { KeyCodes, Selectors, Events, Messages } from \"./constants\"\n\n/**\n * Class that instantiates or destroys all instances of dropdown components on a page.\n *\n * @module Dropdown\n */\nexport default class Dropdown {\n  constructor() {\n    // events\n    this._handleClick = this._handleClick.bind(this)\n    this._handleFirstTabClose = this._handleFirstTabClose.bind(this)\n    this._handleLastTabClose = this._handleLastTabClose.bind(this)\n    this._handleArrowKeyPress = this._handleArrowKeyPress.bind(this)\n    this._handleClose = this._handleClose.bind(this)\n    this._handleEscapeKeyPress = this._handleEscapeKeyPress.bind(this)\n    this._handleOffMenuClick = this._handleOffMenuClick.bind(this)\n    this._validate = this._validate.bind(this)\n    this._teardown = this._teardown.bind(this)\n\n    // all dropdowns\n    this._components = []\n\n    // active dropdown\n    this._activeDropdownId = \"\"\n    this._activeDropdownAttr = \"\"\n    this._activeDropdownMenuId = \"\"\n    this._activeDropdown = null\n    this._activeTrigger = null\n    this._activeDropdownMenu = null\n    this._firstDropdownAction = null\n    this._lastDropdownAction = null\n    this._focusTrap = null\n    this._activeDropdownActions = []\n    this._allowFocusReturn = true\n\n    // dropdown element selectors\n    this._dropdownContainerAttr = `[${Selectors.DATA_DROPDOWN}]`\n    this._dropdownTargetAttr = `[${Selectors.DATA_TARGET}]`\n    this._dropdownMenuClassName = `.${Selectors.DROPDOWN_MENU_CLASS}`\n  }\n\n  // public\n\n  start(id) {\n    ComponentEngine.start({ id, attribute: Selectors.DATA_DROPDOWN, thisArg: this })\n  }\n\n  stop(id) {\n    ComponentEngine.stop({\n      id,\n      attribute: Selectors.DATA_DROPDOWN,\n      thisArg: this,\n      activeNodeKey: \"_activeDropdown\",\n      cancelActiveFn: \"_closeActiveDropdown\",\n    })\n  }\n\n  // private\n\n  _validate(instance) {\n    const dropdownId = instance.getAttribute(Selectors.DATA_DROPDOWN)\n\n    if (!dropdownId) {\n      log(Messages.NO_DROPDOWN_ID_ERROR)\n      return false\n    }\n\n    const dropdownAttr = `[${Selectors.DATA_DROPDOWN}=\"${dropdownId}\"]`\n    const dropdown = document.querySelector(`[${Selectors.DATA_DROPDOWN}=\"${dropdownId}\"]`)\n\n    // no trigger error!\n\n    const dropdownTrigger = dropdown.querySelector(`[${Selectors.DATA_TARGET}]`)\n\n    if (!dropdownTrigger.getAttribute(Selectors.DATA_PARENT)) {\n      log(Messages.NO_PARENT_ERROR)\n      return false\n    }\n\n    const dropdownMenuId = dropdownTrigger.getAttribute(Selectors.DATA_TARGET)\n\n    // no target error!\n\n    const dropdownMenu = dropdown.querySelector(`#${dropdownMenuId}`)\n\n    if (!dropdownMenu) {\n      log(Messages.NO_MENU_ERROR(dropdownAttr))\n      return false\n    }\n\n    dropdownMenu.setAttribute(Selectors.ARIA_LABELLEDBY, dropdownTrigger.id)\n\n    dropdownTrigger.setAttribute(Selectors.ARIA_CONTROLS, dropdownMenuId)\n    dropdownTrigger.setAttribute(Selectors.ARIA_HASPOPUP, \"true\")\n    dropdownTrigger.setAttribute(Selectors.ARIA_EXPANDED, \"false\")\n\n    const dropdownMenuListItems = dropdown.querySelectorAll(`#${dropdownMenuId} > li`)\n\n    if (!dropdownMenuListItems.length) {\n      log(Messages.NO_DROPDOWN_ITEMS_ERROR(dropdownAttr))\n      return false\n    }\n\n    const dropdownMenuActions = this._getDropdownActions(dropdownAttr, `#${dropdownMenuId}`)\n\n    if (!dropdownMenuActions.length) {\n      log(Messages.NO_DROPDOWN_ACTIONS_ERROR(dropdownAttr))\n      return false\n    }\n\n    dropdownMenuActions.forEach(trigger => {\n      trigger.setAttribute(Selectors.TABINDEX, \"-1\")\n    })\n\n    dropdownTrigger.addEventListener(Events.CLICK, this._handleClick)\n    dropdownTrigger.addEventListener(Events.KEYDOWN, this._handleArrowKeyPress)\n\n    return true\n  }\n\n  _teardown(instance) {\n    const id = instance.getAttribute(Selectors.DATA_DROPDOWN)\n    const trigger = instance.querySelector(`[${Selectors.DATA_PARENT}='${id}']`)\n\n    trigger.removeEventListener(Events.CLICK, this._handleClick)\n    trigger.removeEventListener(Events.KEYDOWN, this._handleArrowKeyPress)\n  }\n\n  _handleClick(event, key) {\n    event.preventDefault()\n    event.stopPropagation()\n    this._closeOpenDropdowns(event)\n\n    this._activeTrigger = event.target\n\n    this._setActiveDropdownId()\n    this._setActiveDropdown()\n    this._setActiveDropdownMenu()\n    this._setVisibleState()\n    this._startActiveDropdownEvents()\n\n    if (key && key === KeyCodes.ARROW_UP) {\n      this._lastDropdownAction.focus()\n    } else {\n      this._firstDropdownAction.focus()\n    }\n\n    if (isiOSMobile) document.body.classList.add(Selectors.OVERLAY_OPEN)\n  }\n\n  _handleClose() {\n    if (this._allowFocusReturn) this._handleReturnFocus()\n    this._closeActiveDropdown()\n  }\n\n  _closeActiveDropdown() {\n    if (isiOSMobile) document.body.classList.remove(Selectors.OVERLAY_OPEN)\n\n    this._activeDropdown.setAttribute(Selectors.DATA_VISIBLE, \"false\")\n    this._activeTrigger.setAttribute(Selectors.ARIA_EXPANDED, \"false\")\n\n    this._activeTrigger.removeEventListener(Events.CLICK, this._handleClose)\n    this._activeTrigger.addEventListener(Events.CLICK, this._handleClick)\n    document.removeEventListener(Events.KEYDOWN, this._handleEscapeKeyPress)\n    document.removeEventListener(Events.CLICK, this._handleOffMenuClick)\n    this._firstDropdownAction.removeEventListener(Events.KEYDOWN, this._handleFirstTabClose)\n    this._lastDropdownAction.removeEventListener(Events.KEYDOWN, this._handleLastTabClose)\n\n    this._activeDropdownActions.forEach(action => {\n      action.setAttribute(Selectors.TABINDEX, \"-1\")\n      action.removeEventListener(Events.CLICK, this._handleClose)\n    })\n\n    this._focusTrap.stop()\n    this._focusTrap = null\n\n    this._resetProperties()\n  }\n\n  _resetProperties() {\n    this._activeDropdownId = \"\"\n    this._activeDropdownAttr = \"\"\n    this._activeDropdownMenuId = \"\"\n    this._activeDropdown = null\n    this._activeTrigger = null\n    this._activeDropdownMenu = null\n    this._firstDropdownAction = null\n    this._lastDropdownAction = null\n    this._focusTrap = null\n    this._activeDropdownActions = []\n    this._allowFocusReturn = true\n  }\n\n  _setActiveDropdownId() {\n    this._activeDropdownId = this._activeTrigger.getAttribute(Selectors.DATA_PARENT)\n  }\n\n  _startActiveDropdownEvents() {\n    this._activeTrigger.removeEventListener(Events.CLICK, this._handleClick)\n    this._activeTrigger.addEventListener(Events.CLICK, this._handleClose)\n    document.addEventListener(Events.KEYDOWN, this._handleEscapeKeyPress)\n    document.addEventListener(Events.CLICK, this._handleOffMenuClick)\n\n    this._activeDropdownActions = this._getDropdownActions(\n      this._activeDropdownAttr,\n      `#${this._activeDropdownMenuId}`\n    )\n\n    this._firstDropdownAction = this._activeDropdownActions[0]\n    this._lastDropdownAction = this._activeDropdownActions[this._activeDropdownActions.length - 1]\n\n    this._firstDropdownAction.addEventListener(Events.KEYDOWN, this._handleFirstTabClose)\n    this._lastDropdownAction.addEventListener(Events.KEYDOWN, this._handleLastTabClose)\n\n    this._activeDropdownActions.forEach(action => {\n      action.setAttribute(Selectors.TABINDEX, \"0\")\n      action.addEventListener(Events.CLICK, this._handleClose)\n    })\n\n    const containerSelector = `${this._activeDropdownAttr} > ${this._dropdownMenuClassName}`\n\n    if (this._focusTrap) {\n      this._focusTrap.stop()\n    }\n\n    this._focusTrap = createFocusTrap(containerSelector, { useArrows: true })\n    this._focusTrap.start()\n  }\n\n  _setVisibleState() {\n    this._activeTrigger.setAttribute(Selectors.ARIA_EXPANDED, \"true\")\n    this._activeDropdown.setAttribute(Selectors.DATA_VISIBLE, \"true\")\n  }\n\n  _setActiveDropdownMenu() {\n    this._activeDropdownMenuId = this._activeTrigger.getAttribute(Selectors.DATA_TARGET)\n    this._activeDropdownMenu = this._activeDropdown.querySelector(`#${this._activeDropdownMenuId}`)\n  }\n\n  _setActiveDropdown() {\n    this._activeDropdownAttr = `[${Selectors.DATA_DROPDOWN}=\"${this._activeDropdownId}\"]`\n    this._activeDropdown = document.querySelector(this._activeDropdownAttr)\n  }\n\n  _closeOpenDropdowns(event) {\n    if (!this._activeTrigger) return\n\n    this._allowFocusReturn = false\n    this._handleClose(event)\n    this._allowFocusReturn = true\n  }\n\n  _handleFirstTabClose(event) {\n    const shiftKey = event.which === KeyCodes.SHIFT || event.shiftKey\n    const tabKey = event.which === KeyCodes.TAB\n\n    if (shiftKey && tabKey) {\n      this._handleClose(event)\n    }\n  }\n\n  _handleLastTabClose(event) {\n    const shiftKey = event.which === KeyCodes.SHIFT || event.shiftKey\n    const tabKey = event.which === KeyCodes.TAB\n\n    if (tabKey && !shiftKey) {\n      this._handleClose(event)\n    }\n  }\n\n  _handleArrowKeyPress(event) {\n    if (event.which === KeyCodes.ARROW_UP || event.which === KeyCodes.ARROW_DOWN) {\n      this._handleClick(event, event.which)\n    }\n  }\n\n  _handleEscapeKeyPress(event) {\n    if (event.which === KeyCodes.ESCAPE) {\n      this._handleClose(event)\n    }\n  }\n\n  _handleOffMenuClick(event) {\n    if (event.target !== this._activeTrigger && event.target !== this._activeDropdownMenu) {\n      this._handleClose(event)\n    }\n  }\n\n  _handleReturnFocus() {\n    if (!this._activeTrigger) return\n    focusOnce(this._activeTrigger)\n  }\n\n  _getDropdownActions(dropdownAttr, menuId) {\n    return queryAll(\n      `${dropdownAttr} > ${menuId} > li > a, ${dropdownAttr} > ${menuId} > li > button`\n    )\n  }\n}\n","export const KeyCodes = {\n  ESCAPE: 27,\n}\n\nexport const Selectors = {\n  // unique\n  DATA_MODAL: \"data-modal\",\n  // common\n  DATA_TARGET: \"data-target\",\n  DATA_VISIBLE: \"data-visible\",\n  DATA_CLOSE: \"data-close\",\n  DATA_PARENT: \"data-parent\",\n  // accessibility\n  ARIA_HIDDEN: \"aria-hidden\",\n  ARIA_MODAL: \"aria-modal\",\n  ROLE: \"role\",\n  TABINDEX: \"tabindex\",\n  // classes\n  NO_SCROLL_CLASS: \"no-scroll\",\n  IS_VISIBLE_CLASS: \"is-visible\",\n  OVERLAY_OPEN: \"overlay-open\",\n}\n\nexport const CssProperties = {\n  PADDING_RIGHT: \"paddingRight\",\n  PADDING_LEFT: \"paddingLeft\",\n}\n\nexport const Events = {\n  KEYDOWN: \"keydown\",\n  CLICK: \"click\",\n  RESIZE: \"resize\",\n  BLUR: \"blur\",\n  TRANSITIONEND: \"transitionend\",\n}\n\nexport const Messages = {\n  NO_TRIGGER_ERROR: id => `Could not find modal trigger with id ${id}.`,\n  NO_ID_ERROR:\n    \"Could not detect an id on your [data-modal] element. \" +\n    \"Please add a value matching the modal trigger's [data-parent] attribute.\",\n  NO_MODAL_DIALOG_ERROR: id => `Could not find element with attribute [data-parent='${id}'].`,\n}\n","import {\n  isiOSMobile,\n  getFocusableElements,\n  createFocusTrap,\n  focusOnce,\n  log,\n  queryAll,\n  ComponentEngine,\n} from \"../helpers\"\nimport { KeyCodes, Selectors, CssProperties, Events, Messages } from \"./constants\"\n\nconst COMPONENT_ROLE = \"dialog\"\n\n/**\n * Class that instantiates or destroys all instances of modal components on a page.\n *\n * @module Modal\n */\nexport default class Modal {\n  constructor() {\n    this._handleClick = this._handleClick.bind(this)\n    this._handleOpenTransition = this._handleOpenTransition.bind(this)\n    this._handleCloseTransition = this._handleCloseTransition.bind(this)\n    this._handleClose = this._handleClose.bind(this)\n    this._handleOverlayClick = this._handleOverlayClick.bind(this)\n    this._handleEscapeKeyPress = this._handleEscapeKeyPress.bind(this)\n    this._validate = this._validate.bind(this)\n    this._teardown = this._teardown.bind(this)\n\n    // all modals\n    this._components = []\n\n    // active modal\n    this._activeModalTrigger = null\n    this._activeModalAttr = \"\"\n    this._activeModal = null\n    this._activeModalContent = null\n    this._activeModalId = \"\"\n    this._activeModalContentSelector = \"\"\n    this._activeModalCloseTriggers = []\n    this._originalPagePadding = \"\"\n    this._scrollbarOffset = null\n    this._focusTrap = null\n  }\n\n  // public\n\n  start(id) {\n    ComponentEngine.start({ id, attribute: Selectors.DATA_MODAL, thisArg: this })\n  }\n\n  stop(id) {\n    ComponentEngine.stop({\n      id,\n      attribute: Selectors.DATA_MODAL,\n      thisArg: this,\n      activeNodeKey: \"_activeModal\",\n      cancelActiveFn: \"_closeActiveModal\",\n    })\n  }\n\n  // private\n\n  _validate(instance) {\n    const id = instance.getAttribute(Selectors.DATA_MODAL)\n\n    if (!id) {\n      log(Messages.NO_ID_ERROR)\n      return false\n    }\n\n    const modal = document.querySelector(`[${Selectors.DATA_MODAL}='${id}']`)\n    const modalContent = instance.querySelector(`[${Selectors.DATA_PARENT}='${id}']`)\n\n    if (!modalContent) {\n      log(Messages.NO_MODAL_DIALOG_ERROR(id))\n      return false\n    }\n\n    modal.setAttribute(Selectors.ARIA_HIDDEN, \"true\")\n    modal.setAttribute(Selectors.DATA_VISIBLE, \"false\")\n    modalContent.setAttribute(Selectors.ARIA_MODAL, \"true\")\n    modalContent.setAttribute(Selectors.ROLE, COMPONENT_ROLE)\n\n    const trigger = document.querySelector(`[${Selectors.DATA_TARGET}='${id}']`)\n\n    if (!trigger) {\n      log(Messages.NO_TRIGGER_ERROR(id))\n      return false\n    }\n\n    trigger.addEventListener(Events.CLICK, this._handleClick)\n    return true\n  }\n\n  _teardown(instance) {\n    const id = instance.getAttribute(Selectors.DATA_MODAL)\n    const trigger = document.querySelector(`[${Selectors.DATA_TARGET}='${id}']`)\n\n    trigger.removeEventListener(Events.CLICK, this._handleClick)\n  }\n\n  _handleClick(event) {\n    event.preventDefault()\n\n    this._activeModalTrigger = event.target\n\n    this._setActiveId()\n    this._setActiveModal()\n    this._setActiveModalContent()\n    this._setScrollbarOffset()\n    this._setScrollStop()\n\n    this._focusTrap = createFocusTrap(this._activeModalContentSelector)\n    this._focusTrap.start()\n\n    this._toggleVisibility(true)\n    this._setFocusableChildren()\n    this._setCloseTriggers()\n\n    this._startEvents()\n  }\n\n  _handleClose(event) {\n    event.preventDefault()\n    this._closeActiveModal()\n  }\n\n  _closeActiveModal() {\n    this._toggleVisibility(false)\n    this._focusTrigger()\n    this._unsetScrollStop()\n    this._unsetScrollbarOffset()\n\n    document.removeEventListener(Events.KEYDOWN, this._handleEscapeKeyPress)\n    document.removeEventListener(Events.CLICK, this._handleOverlayClick)\n\n    this._activeModalCloseTriggers.forEach(trigger => {\n      trigger.removeEventListener(Events.CLICK, this._handleClose)\n    })\n\n    this._focusTrap.stop()\n    this._resetProperties()\n  }\n\n  _resetProperties() {\n    this._activeModal = null\n    this._activeModalTrigger = null\n    this._activeModalContent = null\n    this._activeModalId = \"\"\n    this._activeModalContentSelector = \"\"\n    this._activeModalCloseTriggers = []\n    this._originalPagePadding = \"\"\n    this._scrollbarOffset = null\n    this._focusTrap = null\n  }\n\n  _setFocusableChildren() {\n    const elements = getFocusableElements(this._activeModalContentSelector)\n    if (!elements.length) return\n\n    elements.forEach(element => element.setAttribute(Selectors.TABINDEX, \"0\"))\n  }\n\n  _setCloseTriggers() {\n    this._activeModalCloseTriggers = queryAll(\n      `${this._activeModalContentSelector} [${Selectors.DATA_CLOSE}]`\n    )\n  }\n\n  _setActiveId() {\n    this._activeModalId = this._activeModalTrigger.getAttribute(Selectors.DATA_TARGET)\n  }\n\n  _setActiveModal() {\n    this._activeModalAttr = `[${Selectors.DATA_MODAL}='${this._activeModalId}']`\n    this._activeModal = document.querySelector(`[${Selectors.DATA_MODAL}='${this._activeModalId}']`)\n  }\n\n  _setActiveModalContent() {\n    this._activeModalContentSelector = `[${Selectors.DATA_PARENT}='${this._activeModalId}']`\n    this._activeModalContent = this._activeModal.querySelector(this._activeModalContentSelector)\n  }\n\n  _handleOpenTransition() {\n    this._activeModal.removeEventListener(Events.TRANSITIONEND, this._handleOpenTransition)\n    this._focusContent()\n\n    // Setting `scrollTop` to `0` unshifts the\n    // scroll caused by focusing the dialog element\n    this._activeModal.scrollTop = 0\n  }\n\n  _handleCloseTransition() {\n    this._modalCache.style[CssProperties.PADDING_LEFT] = \"\"\n    this._modalCache.removeEventListener(Events.TRANSITIONEND, this._handleCloseTransition)\n    this._modalCache = null\n  }\n\n  _toggleVisibility(isVisible) {\n    this._activeModal.setAttribute(Selectors.ARIA_HIDDEN, isVisible ? \"false\" : \"true\")\n    this._activeModal.setAttribute(Selectors.DATA_VISIBLE, isVisible ? \"true\" : \"false\")\n\n    if (isVisible) {\n      this._activeModal.classList.add(Selectors.IS_VISIBLE_CLASS)\n      this._activeModal.addEventListener(Events.TRANSITIONEND, this._handleOpenTransition)\n    } else {\n      this._modalCache = this._activeModal\n      this._activeModal.classList.remove(Selectors.IS_VISIBLE_CLASS)\n      this._activeModal.addEventListener(Events.TRANSITIONEND, this._handleCloseTransition)\n    }\n  }\n\n  _startEvents() {\n    document.addEventListener(Events.KEYDOWN, this._handleEscapeKeyPress)\n    document.addEventListener(Events.CLICK, this._handleOverlayClick)\n\n    this._activeModalCloseTriggers.forEach(trigger => {\n      trigger.addEventListener(Events.CLICK, this._handleClose)\n    })\n  }\n\n  _getScrollbarOffset() {\n    return window.innerWidth - document.body.getBoundingClientRect().right\n  }\n\n  _setScrollbarOffset() {\n    if (!this._scrollbarIsVisible()) return\n\n    this._scrollbarOffset = this._getScrollbarOffset()\n    this._originalPagePadding = document.body.style[CssProperties.PADDING_RIGHT]\n    document.body.style[CssProperties.PADDING_RIGHT] = `${this._scrollbarOffset}px`\n  }\n\n  _scrollbarIsVisible() {\n    if (typeof window.innerWidth === \"number\") {\n      return window.innerWidth > document.body.getBoundingClientRect().right\n    }\n  }\n\n  _unsetScrollbarOffset() {\n    if (!this._activeModal) return\n    const originalPaddingRight = this._originalPagePadding\n\n    this._activeModal.style[CssProperties.PADDING_LEFT] = `${this._scrollbarOffset}px`\n    document.body.style[CssProperties.PADDING_RIGHT] = originalPaddingRight\n  }\n\n  _handleOverlayClick(event) {\n    if (event.target === this._activeModal) {\n      this._handleClose(event)\n    }\n  }\n\n  _handleEscapeKeyPress(event) {\n    if (event.which === KeyCodes.ESCAPE) {\n      this._handleClose(event)\n    }\n  }\n\n  _focusContent() {\n    focusOnce(this._activeModalContent)\n  }\n\n  _focusTrigger() {\n    focusOnce(this._activeModalTrigger)\n  }\n\n  _unsetScrollStop() {\n    if (isiOSMobile) document.body.classList.remove(Selectors.OVERLAY_OPEN)\n    document.body.classList.remove(Selectors.NO_SCROLL_CLASS)\n    document.documentElement.classList.remove(Selectors.NO_SCROLL_CLASS)\n  }\n\n  _setScrollStop() {\n    if (isiOSMobile) document.body.classList.add(Selectors.OVERLAY_OPEN)\n    document.body.classList.add(Selectors.NO_SCROLL_CLASS)\n    document.documentElement.classList.add(Selectors.NO_SCROLL_CLASS)\n  }\n}\n","export const KeyCodes = {\n  ESCAPE: 27,\n}\n\nexport const Selectors = {\n  // unique\n  DATA_TOOLTIP: \"data-tooltip\",\n  // common\n  DATA_VISIBLE: \"data-visible\",\n  DATA_TARGET: \"data-target\",\n  // accessibility\n  ROLE: \"role\",\n  ARIA_DESCRIBEDBY: \"aria-describedby\",\n  // classes\n  DROP_INLINE_START_CLASS: \"is-drop-inline-start\",\n  DROP_INLINE_END_CLASS: \"is-drop-inline-end\",\n  OVERLAY_OPEN: \"overlay-open\",\n}\n\nexport const CssProperties = {\n  HEIGHT: \"height\",\n  WIDTH: \"width\",\n  TOP: \"top\",\n  LEFT: \"left\",\n}\n\nexport const Events = {\n  CLICK: \"click\",\n  MOUSEOVER: \"mouseover\",\n  MOUSEOUT: \"mouseout\",\n  FOCUS: \"focus\",\n  BLUR: \"blur\",\n  KEYDOWN: \"keydown\",\n}\n\nexport const Messages = {\n  NO_ID_ERROR: \"Could not find tooltip id.\",\n  NO_TRIGGER_ERROR: id => `Could not find a tooltip trigger with attribute [data-target='${id}'].`,\n  NO_TOOLTIP_ERROR: id => `Could not find a tooltip with id '${id}'.`,\n}\n","import { isiOSMobile, log, ComponentEngine } from \"../helpers\"\nimport { KeyCodes, Selectors, CssProperties, Events, Messages } from \"./constants\"\n\nconst COMPONENT_ROLE = \"tooltip\"\n\n/**\n * Class that instantiates or destroys all instances of tooltip components on a page.\n *\n * @module Tooltip\n */\nexport default class Tooltip {\n  constructor() {\n    this._handleEvent = this._handleEvent.bind(this)\n    this._handleClose = this._handleClose.bind(this)\n    this._handleEscapeKeyPress = this._handleEscapeKeyPress.bind(this)\n    this._validate = this._validate.bind(this)\n    this._teardown = this._teardown.bind(this)\n\n    // all tooltips\n    this._components = []\n\n    // active tooltip\n    this._activeTrigger = null\n    this._activeTooltipBox = null\n  }\n\n  // public\n\n  start(id) {\n    ComponentEngine.start({ id, attribute: Selectors.DATA_TOOLTIP, thisArg: this })\n  }\n\n  stop(id) {\n    ComponentEngine.stop({\n      id,\n      attribute: Selectors.DATA_TOOLTIP,\n      thisArg: this,\n      activeNodeKey: \"_activeTooltip\",\n      cancelActiveFn: \"_handleClose\",\n    })\n  }\n\n  // private\n\n  _validate(instance) {\n    const instanceId = instance.getAttribute(Selectors.DATA_TOOLTIP)\n\n    if (!instanceId) {\n      log(Messages.NO_ID_ERROR)\n      return false\n    }\n\n    const trigger = instance.querySelector(this._getTrigger(instanceId))\n    const tooltip = instance.querySelector(`#${instanceId}`)\n\n    if (!trigger) {\n      log(Messages.NO_TRIGGER_ERROR(instanceId))\n      return false\n    }\n\n    if (!tooltip) {\n      log(Messages.NO_TOOLTIP_ERROR(instanceId))\n      return false\n    }\n\n    trigger.setAttribute(Selectors.ARIA_DESCRIBEDBY, instanceId)\n    tooltip.setAttribute(Selectors.ROLE, COMPONENT_ROLE)\n\n    trigger.addEventListener(Events.MOUSEOVER, this._handleEvent)\n    trigger.addEventListener(Events.FOCUS, this._handleEvent)\n\n    return true\n  }\n\n  _teardown(instance) {\n    const id = instance.getAttribute(Selectors.DATA_TOOLTIP)\n    const trigger = instance.querySelector(this._getTrigger(id))\n\n    trigger.removeEventListener(Events.MOUSEOVER, this._handleEvent)\n    trigger.removeEventListener(Events.FOCUS, this._handleEvent)\n  }\n\n  _handleEvent(event) {\n    if (this._activeTooltip) this._handleClose()\n\n    this._activeTrigger = event.target\n\n    const id = this._activeTrigger.getAttribute(Selectors.DATA_TARGET)\n    this._activeTooltip = document.querySelector(`[${Selectors.DATA_TOOLTIP}='${id}']`)\n    this._activeTooltipBox = document.querySelector(`#${id}`)\n\n    if (this._hasInlineClass()) {\n      this._alignTooltip(CssProperties.HEIGHT)\n    } else {\n      this._alignTooltip(CssProperties.WIDTH)\n    }\n\n    this._setVisibleState()\n    this._startCloseEvents()\n  }\n\n  _handleClose() {\n    if (this._activeTooltipBox) this._setHideState()\n\n    this._startOpenEvents()\n    this._resetProperties()\n  }\n\n  _resetProperties() {\n    this._activeTooltip = null\n    this._activeTrigger = null\n    this._activeTooltipBox = null\n  }\n\n  _setVisibleState() {\n    this._activeTooltipBox.setAttribute(Selectors.DATA_VISIBLE, \"true\")\n  }\n\n  _setHideState() {\n    this._activeTooltipBox.setAttribute(Selectors.DATA_VISIBLE, \"false\")\n  }\n\n  _startCloseEvents() {\n    this._activeTrigger.removeEventListener(Events.MOUSEOVER, this._handleEvent)\n    this._activeTrigger.removeEventListener(Events.FOCUS, this._handleEvent)\n    this._activeTrigger.addEventListener(Events.MOUSEOUT, this._handleClose)\n    this._activeTrigger.addEventListener(Events.BLUR, this._handleClose)\n    document.addEventListener(Events.KEYDOWN, this._handleEscapeKeyPress)\n\n    if (isiOSMobile) document.body.classList.add(Selectors.OVERLAY_OPEN)\n  }\n\n  _handleEscapeKeyPress(event) {\n    if (event.which === KeyCodes.ESCAPE) {\n      this._handleClose()\n    }\n  }\n\n  _startOpenEvents() {\n    if (!this._activeTrigger) return\n\n    this._activeTrigger.removeEventListener(Events.MOUSEOUT, this._handleClose)\n    this._activeTrigger.removeEventListener(Events.BLUR, this._handleClose)\n    this._activeTrigger.addEventListener(Events.MOUSEOVER, this._handleEvent)\n    this._activeTrigger.addEventListener(Events.FOCUS, this._handleEvent)\n    document.removeEventListener(Events.KEYDOWN, this._handleEscapeKeyPress)\n\n    if (isiOSMobile) document.body.classList.remove(Selectors.OVERLAY_OPEN)\n  }\n\n  _alignTooltip(property) {\n    const triggerSize = this._getSize(this._activeTrigger, property)\n    const tooltipSize = this._getSize(this._activeTooltipBox, property)\n    const triggerIsBigger = triggerSize > tooltipSize\n\n    const offset = triggerIsBigger\n      ? (triggerSize - tooltipSize) / 2\n      : (tooltipSize - triggerSize) / -2\n\n    if (property === CssProperties.HEIGHT) {\n      this._activeTooltipBox.style[CssProperties.TOP] = `${offset}px`\n    } else {\n      this._activeTooltipBox.style[CssProperties.LEFT] = `${offset}px`\n    }\n  }\n\n  _getTrigger(id) {\n    return `[${Selectors.DATA_TARGET}=\"${id}\"]`\n  }\n\n  _getSize(element, property) {\n    return Math.floor(element.getBoundingClientRect()[property])\n  }\n\n  _hasInlineClass() {\n    const classList = this._activeTooltipBox.classList\n\n    return (\n      classList.contains(Selectors.DROP_INLINE_START_CLASS) ||\n      classList.contains(Selectors.DROP_INLINE_END_CLASS)\n    )\n  }\n}\n","import _Collapsible from \"./collapsible\"\nimport _Dropdown from \"./dropdown\"\nimport _Modals from \"./modal\"\nimport _Tooltips from \"./tooltip\"\nimport { createFocusRing as _createFocusRing, createFocusTrap as _createFocusTrap } from \"./helpers\"\n\nexport const Collapsibles = new _Collapsible()\nexport const Dropdowns = new _Dropdown()\nexport const Modals = new _Modals()\nexport const Tooltips = new _Tooltips()\nexport const createFocusRing = _createFocusRing\nexport const createFocusTrap = _createFocusTrap\n\nconst Undernet = {\n  Modals,\n  Collapsibles,\n  Dropdowns,\n  Tooltips,\n  createFocusTrap: _createFocusTrap,\n  createFocusRing: _createFocusRing,\n}\n\nconst focusRing = Undernet.createFocusRing()\n\nUndernet.start = (id, enableFocusRing = false) => {\n  Undernet.Modals.start(id)\n  Undernet.Collapsibles.start(id)\n  Undernet.Dropdowns.start(id)\n  Undernet.Tooltips.start(id)\n\n  if (enableFocusRing) focusRing.start()\n}\n\nUndernet.stop = (id, disableFocusRing = false) => {\n  Undernet.Modals.stop(id)\n  Undernet.Collapsibles.stop(id)\n  Undernet.Dropdowns.stop(id)\n  Undernet.Tooltips.stop(id)\n\n  if (disableFocusRing) focusRing.stop()\n}\n\nexport default Undernet\n","import Undernet from \"./index\"\nimport { isBrowserEnv } from \"./helpers\"\n\nif (isBrowserEnv) {\n  window.Undernet = Undernet\n}\n"],"names":["KeyCodes","SHIFT","TAB","ARROW_UP","ARROW_DOWN","Selectors","FOCUSABLE_TAGS","KEYBOARD_CLASS","NOT_VISUALLY_HIDDEN_CLASS","TABINDEX","Events","KEYDOWN","CLICK","BLUR","Messages","NO_SELECTOR_STRING_OR_CHILDREN_ERROR","OPTION_MATCHERS_DATA_TYPE_ERROR","INCORRECT_MATCHER_TYPE_ERROR","type","NO_MATCHER_LENGTH_ERROR","queryAll","selector","parent","document","Array","apply","querySelectorAll","getFocusableElements","selectorString","matchers","focusables","map","join","isBrowserEnv","window","isString","value","isFunction","ComponentEngine","start","metadata","id","attribute","thisArg","instance","querySelector","validComponent","filter","_validate","_components","push","length","instances","validComponents","concat","stop","activeNodeKey","cancelActiveFn","targetIndex","activeInstance","index","getAttribute","_teardown","splice","forEach","createFocusRing","listeningForKeydown","listenForKeyboard","body","classList","add","removeEventListener","addEventListener","listenForClick","remove","log","message","console","createFocusTrap","options","useArrows","children","isArray","hasBadMatcher","matcher","focusableChildren","focusableFirstChild","focusableLastChild","handleFocusTrapWithTab","event","containerElement","containerActive","activeElement","firstActive","lastActive","tabKey","which","shiftKey","hasShift","noShift","preventDefault","focus","focusNextChild","i","focusLastChild","handleFocusTrapWithArrows","arrowUp","arrowDown","focusOnce","element","handleBlur","target","removeAttribute","setAttribute","isiOSMobile","test","navigator","userAgent","throttle","callback","limit","timeout","clear","arguments","setTimeout","DATA_COLLAPSIBLE","DATA_VISIBLE","DATA_TARGET","DATA_PARENT","ARIA_EXPANDED","ARIA_CONTROLS","ARIA_HIDDEN","ARIA_LABELLEDBY","IS_READY_CLASS","IS_VISIBLE_CLASS","CssProperties","HEIGHT","VISIBILITY","CssValues","AUTO","HIDDEN","VISIBLE","TRANSITIONEND","NO_COLLAPSIBLE_ID_ERROR","NO_TRIGGER_ERROR","NO_TRIGGER_ID_ERROR","NO_CONTENT_ERROR","Collapsible","_handleClick","bind","_handleExpandTransition","_activeCollapsible","_activeTrigger","_activeContent","_activeId","_nextAriaExpandedState","_nextAriaHiddenState","_getCollapsibleData","trigger","contentId","content","contentIsVisible","style","scrollHeight","requestAnimationFrame","_setIds","_setActiveCollapsible","_setActiveContent","_setNextVisibleState","_toggleCollapsible","fullHeightValue","_collapsePanel","_expandPanel","height","currentVisibleState","ESCAPE","DATA_DROPDOWN","DROPDOWN_MENU_CLASS","ARIA_HASPOPUP","OVERLAY_OPEN","NO_DROPDOWN_ID_ERROR","NO_MENU_ERROR","attr","NO_DROPDOWN_ITEMS_ERROR","NO_DROPDOWN_ACTIONS_ERROR","NO_PARENT_ERROR","Dropdown","_handleFirstTabClose","_handleLastTabClose","_handleArrowKeyPress","_handleClose","_handleEscapeKeyPress","_handleOffMenuClick","_activeDropdownId","_activeDropdownAttr","_activeDropdownMenuId","_activeDropdown","_activeDropdownMenu","_firstDropdownAction","_lastDropdownAction","_focusTrap","_activeDropdownActions","_allowFocusReturn","_dropdownContainerAttr","_dropdownTargetAttr","_dropdownMenuClassName","dropdownId","dropdownAttr","dropdown","dropdownTrigger","dropdownMenuId","dropdownMenu","dropdownMenuListItems","dropdownMenuActions","_getDropdownActions","key","stopPropagation","_closeOpenDropdowns","_setActiveDropdownId","_setActiveDropdown","_setActiveDropdownMenu","_setVisibleState","_startActiveDropdownEvents","_handleReturnFocus","_closeActiveDropdown","action","_resetProperties","containerSelector","menuId","DATA_MODAL","DATA_CLOSE","ARIA_MODAL","ROLE","NO_SCROLL_CLASS","PADDING_RIGHT","PADDING_LEFT","RESIZE","NO_ID_ERROR","NO_MODAL_DIALOG_ERROR","COMPONENT_ROLE","Modal","_handleOpenTransition","_handleCloseTransition","_handleOverlayClick","_activeModalTrigger","_activeModalAttr","_activeModal","_activeModalContent","_activeModalId","_activeModalContentSelector","_activeModalCloseTriggers","_originalPagePadding","_scrollbarOffset","modal","modalContent","_setActiveId","_setActiveModal","_setActiveModalContent","_setScrollbarOffset","_setScrollStop","_toggleVisibility","_setFocusableChildren","_setCloseTriggers","_startEvents","_closeActiveModal","_focusTrigger","_unsetScrollStop","_unsetScrollbarOffset","elements","_focusContent","scrollTop","_modalCache","isVisible","innerWidth","getBoundingClientRect","right","_scrollbarIsVisible","_getScrollbarOffset","originalPaddingRight","documentElement","DATA_TOOLTIP","ARIA_DESCRIBEDBY","DROP_INLINE_START_CLASS","DROP_INLINE_END_CLASS","WIDTH","TOP","LEFT","MOUSEOVER","MOUSEOUT","FOCUS","NO_TOOLTIP_ERROR","Tooltip","_handleEvent","_activeTooltipBox","instanceId","_getTrigger","tooltip","_activeTooltip","_hasInlineClass","_alignTooltip","_startCloseEvents","_setHideState","_startOpenEvents","property","triggerSize","_getSize","tooltipSize","triggerIsBigger","offset","Math","floor","contains","Collapsibles","_Collapsible","Dropdowns","_Dropdown","Modals","_Modals","Tooltips","_Tooltips","Undernet","_createFocusTrap","_createFocusRing","focusRing","enableFocusRing","disableFocusRing"],"mappings":"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"}